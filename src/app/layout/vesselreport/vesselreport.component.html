<div *ngIf="showContent">
    <h2 class="text-muted">Vessel report <small> {{ getMatlabDateToJSDate(vesselObject.date) }} </small></h2>
    <div class="col-lg-12">
        <form class="form-inline mb-3">
            <div class="form-group" (keyup.enter)="searchTransfersByNewSpecificDate()">
                <div class="input-group datepicker-input">
                    <input class="form-control" ngbDatepicker #dp="ngbDatepicker" name="dp" [minDate]="{year: 2014, month: 1, day: 1}" [outsideDays]="outsideDays" [displayMonths]='1' [maxDate]="maxDate" [(ngModel)]="datePickerValue" (ngModelChange)="onChange($event)" [dayTemplate]="customDay" >
                    <ng-template #customDay let-date="date" let-currentMonth="currentMonth" let-selected="selected" let-disabled="disabled" let-focused="focused">
                            <div class="custom-day btn-light" [class.bg-primary]="selected" [class.disable-day]="disabled" [class.text-muted]="disabled" [class.has-sailed]="hasSailed(date)">
                                {{ date.day }}
                            </div>
                        </ng-template>

                    <button class="input-group-addon" (click)="dp.toggle()" type="button">
                        <span class="fa fa-calendar"></span>
                    </button>
                    <div class="form-group">
                        <select class="form-control boatSelectDropdown" name="selectVessel" [(ngModel)]="vesselObject.mmsi" (change)="onChange($event)" required [disabled]="tokenInfo.userPermission == 'Vessel master'">
                            <option class="dropdown-item" *ngFor="let vessel of vessels" [ngValue]="vessel.mmsi">{{vessel.nicename}}</option>
                        </select>
                    </div>
                </div>
            </div>
        </form>
    </div>
    <div *ngIf="noPermissionForData == false; else noPermission">
        <div class="divContainer" *ngIf="Locdata != null && Locdata.length > 0 && showContent == true; else other_content">
            <div class="leftdiv">
                <agm-map [latitude]="latitude" [longitude]="longitude"  [zoom]="overviewZoomlvl" [mapTypeId]="mapTypeId" [gestureHandling]="cooperative" [streetViewControl]="streetViewControl">
                    <ng-container *ngFor="let parks of Locdata; let i=index" >
                        <agm-circle [radius]="200" [fillOpacity]="0.8" *ngFor="let geo of parks.lat; let i = index" [latitude]="objectToInt(geo)" [longitude]="objectToInt(parks.lon[i])" >
                        </agm-circle>
                    </ng-container>
                    <agm-polyline [strokeColor]="'#FF0000'" [strokeWeight]="1.5">
                            <ng-container *ngFor="let location of boatLocationData; let i = index" >
                                <agm-polyline-point *ngFor="let loc of location.lat; let i = index"  [latitude]="objectToInt(loc)" [longitude]="objectToInt(location.lon[i])" >
                                </agm-polyline-point>
                            </ng-container>
                    </agm-polyline>
                </agm-map>
            </div>
            <div class="rightdiv">  
                <agm-map [latitude]="latitude" [longitude]="longitude" [zoom]="detailZoomlvl" [mapTypeId]="mapTypeId" [gestureHandling]="cooperative" [disableDefaultUI]="true" [streetViewControl]="streetViewControl">
                    <ng-container *ngFor="let parks of Locdata; let i=index" >
                        <agm-circle [fillOpacity]="0.8" [radius]="100" *ngFor="let geo of parks.lat; let i = index" [latitude]="objectToInt(geo)" [longitude]="objectToInt(parks.lon[i])" >
                        </agm-circle>
                    </ng-container>
                    <agm-polyline [strokeColor]="'#F00'" [strokeWeight]="1.5">
                            <ng-container *ngFor="let location of boatLocationData; let i = index" >
                                <agm-polyline-point *ngFor="let loc of location.lat; let i = index"  [latitude]="objectToInt(loc)" [longitude]="objectToInt(location.lon[i])" >
                                </agm-polyline-point>
                            </ng-container>
                    </agm-polyline>
                </agm-map>
            </div>
            <div *ngIf="vesselObject.vesselType == 'CTV'">
                <app-ctvreport [vesselObject]="vesselObject" [tokenInfo]="tokenInfo" (overviewZoomLvl)="getOverviewZoomLvl($event)" (detailZoomLvl)="getDetailZoomLvl($event)"></app-ctvreport>
            </div>
            <div *ngIf="vesselObject.vesselType == 'SOV' || vesselObject.vesselType == 'OSV'">
                <app-sovreport (overviewZoomLvl)="getOverviewZoomLvl($event)" (detailZoomLvl)="getDetailZoomLvl($event)"></app-sovreport>
            </div>
        </div>
    </div>
    <ng-template #other_content>
        <div class="divContainer">
            <h3>There is not data available for the selected day and vessel.</h3>
        </div>
    </ng-template>
    <ng-template #noPermission>
        <div class="divContainer">
            <h3>You are not allowed to view the boat you requested</h3>
        </div>
    </ng-template>
</div>