<div *ngIf="showContent">
    <br><br>
    <div class="divContainer" *ngIf="transferData?.length > 0">
        <h3 *ngIf="noTransits">There is no transit data available</h3>
        <table class="table table-responsive transitTable">
            <tr>
                <ng-template #tooltip_speedknots class="helpContent">
                    Speed in knots
                </ng-template>
                <td>Departure Port</td>
                <td>{{getMatlabDateToJSTime(general.portDepartureTime)}}</td>
                <td>Departure Wind Farm</td>
                <td>{{getMatlabDateToJSTime(general.departureWindFarmTime)}}</td>
                <td>Arrival wind farm</td>
                <td>{{getMatlabDateToJSTime(general.WindFarmArrivalTime)}}</td>
                <td>Arrival Port</td>
                <td>{{getMatlabDateToJSTime(general.portArrivalTime)}}</td>
                <td>Input 1</td>
                <td><input class="form-control form-control-sm"></td>
            </tr>
            <tr>
                <td>Avg. speed outbound</td>
                <td>{{roundNumber(general.AvgSpeedOutbound, 10, ' kts')}}</td>
                <td>Avg. speed inbound</td>
                <td>{{roundNumber(general.AvgSpeedInbound, 10, ' kts')}}</td>
                <td>Max. speed outbound</td>
                <td>{{roundNumber(general.AvgSpeedOutboundUnrestricted, 10, ' kts')}}</td>
                <td>Max. speed inbound</td>
                <td>{{roundNumber(general.AvgSpeedInboundUnrestricted, 10, ' kts')}}</td>
                <td>Input 2</td>
                <td><input class="form-control form-control-sm"></td>
            </tr>
            <tr>
                <td>MSI outbound</td>
                <td>{{roundNumber(general.MsiOutbound, 10, '%')}}</td>
                <td>MSI inbound</td>
                <td>{{roundNumber(general.MsiInbound, 10, '%')}}</td>
                <td>WBV, Technicians</td>
                <td>{{roundNumber(general.WBVtechs, 100, ' (A8)')}}</td>
                <td>WBV, Vessel Crew</td>
                <td>{{roundNumber(general.WBVcrew, 100, ' (A8)')}}</td>
                <td>Input 3</td>
                <td><input class="form-control form-control-sm"></td>
            </tr>
            <tr>
                <td>Distance Sailed</td>
                <td>{{roundNumber(general.sailedDistance, 10, ' NM')}}</td>
                <td>Fuel Consumed</td>
                <td>{{roundNumber(general.TotalFuel, 10)}}</td>
                <td>Fuel Economy</td>
                <td>{{roundNumber(general.FuelEcon, 10)}}</td>
                <td></td><td></td>
                <td>Input 4</td>
                <td><input class="form-control form-control-sm"></td>
            </tr>
            <tr>
                <td>Number of dockings</td>
                <td>{{roundNumber(general.numDockings, 1)}}</td>
                <td>Average Docking Time</td>
                <td>{{roundNumber(general.AverageDockedTime, 1)}}</td>
                <td></td><td></td><td></td><td></td>
                <td></td>
                <td><button class="btn btn-md btn-primary submitBtnDate" type="button">Save changes to userinput</button></td>
            </tr>
        </table>
    </div>
    <br><br>
    <div class="divContainer" *ngIf="transferData?.length > 0">
        <h3>Dockings <button (click)="openModal(content)" class="btn btn-md btn-primary submitBtnDate" type="button"> Enter userinput</button></h3>
        <table class="table table-hover table-striped">
            <thead>
                <tr>
                    <th>#</th>
                    <th>start time</th>
                    <th>stop time</th>
                    <th>duration</th>
                    <th>score</th>
                    <th>location</th>
                    <th>Pax up/down</th>
                    <th>Cargo up/down</th>
                    <th>comment</th>
                    <th>detector</th>
                    <th>save</th>
                    <th *ngIf="videoRequestPermission">video request</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let transfer_Data of transferData;let ind = index" ng-form="myForm">
                    <td>{{ind + 1}}</td>
                    <td>{{getMatlabDateToJSTime(transfer_Data.startTime)}}</td>
                    <td>{{getMatlabDateToJSTime(transfer_Data.stopTime)}}</td>
                    <td>{{getMatlabDateToJSTimeDifference(transfer_Data.stopTime, transfer_Data.startTime)}}</td>
                    <td>{{roundNumber(transfer_Data.score, 10)}}</td>
                    <td>{{transfer_Data.location}}</td>
                    <td>
                        <select class="form-control form-control-sm"><option>0</option><option>1 up</option><option>2 up</option><option >3 up</option><option >1 down</option><option>2 down</option><option>3 down</option></select>
                    </td>
                    <td>
                        <select class="form-control form-control-sm"><option>0</option><option>1 up</option><option>2 up</option><option >3 up</option><option >1 down</option><option>2 down</option><option>3 down</option></select>
                    </td>
                    <td class="comment">
                        <span ngbDropdown class="d-inline-block dropdown">
                            <button class="btn btn-outline-primary" [class.commentOptions]="transfer_Data.comment != 'Other'" ngbDropdownToggle>
                                <span [class.commentButton]="transfer_Data.comment != 'Other'">{{transfer_Data.comment}}</span>
                            </button>
                            <span ngbDropdownMenu>
                                <button *ngFor="let opt of commentOptions" class="dropdown-item" (click)="transfer_Data.comment = opt;transfer_Data.formChanged=true">{{opt}}</button>
                            </span>
                        </span>
                        <span *ngIf="transfer_Data.comment == 'Other'">
                            <input name="otherComment" [(ngModel)]="transfer_Data.commentChanged.otherComment" type="text"
                                class="form-control otherComment" (ngModelChange)="transfer_Data.formChanged=true" />
                        </span>
                    </td>
                     <td>{{transfer_Data.detector}}</td>
                    <td>
                        <button class="btn btn-lg btn-primary submitBtnDate" (click)="saveComment(transfer_Data)" type="button" [disabled]="!transfer_Data.formChanged">Save</button>
                    </td>
                    <td *ngIf="videoRequestPermission">
                        <button *ngIf="transfer_Data.video_requested" class="btn btn-lg btn-primary submitBtnDate videoRequest {{transfer_Data.video_requested.status}}" (click)="setRequest(transfer_Data);" type="button" [disabled]="transfer_Data.videoAvailable == 0 || transfer_Data.video_requested.disabled">{{transfer_Data.video_requested.text}}</button>
                    </td>
                </tr>
            </tbody>
        </table>
        <ng-template #content let-modal >
            <div class="modal-header">
                <h4 class="modal-title">Fill out daily statistics</h4>
                <button type="button" class="close" aria-label="Close" (click)="closeModal()">
                <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form>
                    <h2>Option 1</h2>
                    <table class="table table-responsive">
                        <tr>
                            <td>Name 11</td>
                            <td><input class="form-control form-control-lg"></td>
                            <td>Name 12</td>
                            <td><input class="form-control form-control-lg"></td>
                        </tr>
                        <tr>
                            <td>Name 21</td>
                            <td><input class="form-control form-control-lg"></td>
                            <td>Name 22</td>
                            <td><input class="form-control form-control-lg"></td>
                        </tr>
                        <tr>
                            <td>Name 31</td>
                            <td><input class="form-control form-control-lg"></td>
                            <td>Name 32</td>
                            <td><input class="form-control form-control-lg"></td>
                        </tr>
                        <tr>
                            <td>Name 41</td>
                            <td><input class="form-control form-control-lg"></td>
                            <td>Name 42</td>
                            <td><input class="form-control form-control-lg"></td>
                        </tr>
                    </table>
                    <hr>
                    <h3>Option 2</h3>
                    <table class="table table-responsive">
                        <tr>
                            <td>Name 11</td>
                            <td><input class="form-control form-control-lg"></td>
                            <td>Name 12</td>
                            <td><input class="form-control form-control-lg"></td>
                        </tr>
                        <tr>
                            <td>Name 21</td>
                            <td><input class="form-control form-control-lg"></td>
                            <td>Name 22</td>
                            <td><input class="form-control form-control-lg"></td>
                        </tr>
                        <tr>
                            <td>Transfer 1</td>
                            <td>Pax up</td>
                            <td><input class="form-control form-control-sm"></td>
                            <td>Pax down</td>
                            <td><input class="form-control form-control-sm"></td>
                            <td>Cargo up</td>
                            <td><input class="form-control form-control-sm"></td>
                            <td>Cargo down</td>
                            <td><input class="form-control form-control-sm"></td>
                        </tr>
                        <tr>
                            <td>Transfer 2</td>
                            <td>Pax up</td>
                            <td><input class="form-control form-control-sm"></td>
                            <td>Pax down</td>
                            <td><input class="form-control form-control-sm"></td>
                            <td>Cargo up</td>
                            <td><input class="form-control form-control-sm"></td>
                            <td>Cargo down</td>
                            <td><input class="form-control form-control-sm"></td>
                        </tr>
                        <tr>
                            <td>Transfer 3</td>
                            <td>Pax up</td>
                            <td><input class="form-control form-control-sm"></td>
                            <td>Pax down</td>
                            <td><input class="form-control form-control-sm"></td>
                            <td>Cargo up</td>
                            <td><input class="form-control form-control-sm"></td>
                            <td>Cargo down</td>
                            <td><input class="form-control form-control-sm"></td>
                        </tr>
                    </table>
                    <hr>
                    <h3>Option 3</h3>
                    <table class="table table-responsive">
                        <tr>
                            <td>Name 11</td>
                            <td><input class="form-control form-control-lg"></td>
                            <td>Name 12</td>
                            <td><input class="form-control form-control-lg"></td>
                        </tr>
                        <tr>
                            <td>Name 21</td>
                            <td><input class="form-control form-control-lg"></td>
                            <td>Name 22</td>
                            <td><input class="form-control form-control-lg"></td>
                        </tr>
                    </table>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn" (click)="closeModal()">Close without saving</button>
                <button type="button" class="btn btn-primary" (click)="closeModal()">Save and close</button>
            </div>
        </ng-template> 
        <ngb-alert *ngIf="showAlert" [type]="alert.type" (close)="showAlert=false">{{ alert.message }}</ngb-alert>
    </div>
    <div class="row">
        <div class="col-lg-8" *ngFor="let transfer_Data of transferData;let ind = index">
            <span *ngIf="transfer_Data.slipGraph !== undefined && transfer_Data.slipGraph.slipX.length > 0">
                <h3>Transfer: #{{ind + 1}} - location: {{transfer_Data.location}} - Score:
                    {{roundNumber(transfer_Data.score, 10)}}</h3>
            </span>
            <span *ngIf="transfer_Data.slipGraph !== undefined && transfer_Data.slipGraph.slipX && transfer_Data.slipGraph.slipX.length == undefined">
                <h3>Transfer #{{ind + 1}} - location: {{transfer_Data.location}} - status: {{transfer_Data.detector}}</h3>
            </span>
            <canvas id="canvas{{ind}}">{{charts[ind]}}</canvas>
        </div>
    </div>
    <div class="videoRequestLoading" *ngIf="videoRequestLoading">
        <div class="spinner">
            <div class="bounce1"></div>
            <div class="bounce2"></div>
            <div class="bounce3"></div>
        </div>
    </div>
</div>