<div [@routerTransition]>
    <h2 class="text-muted">Dashboard <small>Ship Overview</small></h2>
    <agm-map #gm [latitude]="latitude" [longitude]="longitude" [zoom]="zoomlvl" [mapTypeId]="mapTypeId" [streetViewControl]="streetViewControl">
        <ng-container *ngFor="let location of locationData; let i=index" >
             <agm-marker [latitude]="location.LAT" [longitude]="location.LON" (mouseOver)="onMouseOver(infoWindow, gm)" >
             	<agm-info-window #infoWindow>
                    <pre>
                        <strong style="font-size: 15px;">{{ location.vesselInformation[location.vesselInformation.length -1]}}</strong>
                        MMSI: {{location._id}}
                        Timestamp: {{location.TIMESTAMP.toString().replace('T', ' ') }}
                        <br>
                        <button class="btn btn-sm btn-default DPRButton" (click)="redirectDailyVesselReport(location._id)" type="button">Go to DPR</button>
                    </pre>
     	        </agm-info-window>
             </agm-marker>
        </ng-container>
    </agm-map>

    <ngb-alert *ngIf="showAlert" class="userCreateAlert" [type]="alert.type" (close)="showAlert=false">{{ alert.text }}</ngb-alert>
</div>

<!-- Currently, children are only used for one-way binding. When filled with content. Move to content above. -->
<div *ngIf="tokenInfo.userPermission == userType.Admin">
    <app-admin [tokenInfo]="tokenInfo" (locationData)="getLocationData($event)" ></app-admin>
</div>
<div *ngIf="tokenInfo.userPermission == userType.LogisticsSpecialist">
    <app-logistics-specialist [tokenInfo]="tokenInfo" (locationData)="getLocationData($event)" ></app-logistics-specialist>
</div>
<div *ngIf="tokenInfo.userPermission == userType.MarineController">
    <app-marine-controller [tokenInfo]="tokenInfo" (locationData)="getLocationData($event)" ></app-marine-controller>
</div>
<div *ngIf="tokenInfo.userPermission == userType.Vesselmaster">
    <app-vessel-master [tokenInfo]="tokenInfo" (locationData)="getLocationData($event)" ></app-vessel-master>
</div>